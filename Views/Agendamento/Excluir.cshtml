@model AgendaTatiNails.Models.Atendimento

@{
    ViewData["Title"] = "Cancelar Agendamento";
}

@section Styles {
    <link rel="stylesheet" href="~/css/Agendamento/crud-page.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Admin/admin.css" asp-append-version="true" /> <style>
        .crud-card { border-top-color: #dc3545; }
    </style>
}


<div class="crud-container">
    <div class="crud-card">

        <h1 class="crud-title">@ViewData["Title"]</h1>
        <p class="crud-subtitle" style="color: #dc3545;">Tem certeza que deseja cancelar este agendamento?</p>

        <div class="confirmation-details">
            <dl>
                <dt>Serviço(s):</dt>
                <dd>@(Model.Servicos.Any() ? string.Join(", ", Model.Servicos.Select(s => s.ServicoDesc)) : "N/A")</dd>

                <dt>Data e Hora:</dt>
                <dd>@Model.AtendDataAtend.ToString("dd/MM/yyyy 'às' HH:mm")</dd>

                <dt>Status Atual:</dt>
                <dd>@Html.Raw(GetStatusBadge(Model.AtendStatus))</dd>
            </dl>
        </div>

        <form asp-action="ExcluirConfirmado" method="post">
             @Html.AntiForgeryToken()
             
             <input type="hidden" asp-for="AtendId" />

             <div class="crud-actions">
                  <button type="submit" class="btn btn-danger">Sim, Cancelar Agendamento</button>
                  <a asp-action="ListaServico" asp-controller="Servico" class="btn btn-secondary">Não, Voltar</a>
             </div>
        </form>

    </div>
</div>

@functions {
    public string GetStatusBadge(int status)
    {
        return status switch
        {
            1 => "<span class=\"badge status-agendado\">Agendado</span>",
            2 => "<span class=\"badge status-concluido\">Concluído</span>",
            3 => "<span class=\"badge status-cancelado\">Cancelado</span>",
            _ => "<span class=\"badge status-desc\">Desconhecido</span>"
        };
    }
}